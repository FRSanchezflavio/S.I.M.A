<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>S.I.M.A — One‑Pager Ejecutivo</title>
    <style>
      :root { --primary:#111; --muted:#666; --accent:#0a84ff; }
      * { box-sizing: border-box; }
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:#111; margin:0; }
      .page { max-width: 940px; margin: 0 auto; padding: 24px 28px 32px; }
      header { display:flex; align-items:center; justify-content:space-between; margin-bottom: 12px; }
      h1 { font-size: 28px; margin: 0 0 4px; }
      .subtitle { color: var(--muted); font-size: 14px; }
      .grid { display:grid; grid-template-columns: 1.2fr 1fr; gap: 18px; margin-top: 10px; }
      h2 { font-size: 16px; margin: 16px 0 8px; text-transform: uppercase; letter-spacing: .02em; }
      ul { margin: 8px 0 0 18px; padding:0; }
      li { margin: 4px 0; }
      .card { border: 1px solid #e5e5e5; border-radius: 10px; padding: 12px 14px; }
      .muted { color: var(--muted); }
      .pill { display:inline-block; border:1px solid #ddd; border-radius:999px; padding:2px 8px; font-size:12px; margin-right:6px; }
      .shots { display:grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 10px; }
      figure { margin:0; }
      img { width:100%; border: 1px solid #eee; border-radius: 8px; }
      figcaption { font-size: 11px; color: var(--muted); margin-top: 4px; }
      footer { margin-top: 10px; font-size: 12px; color: var(--muted); display:flex; justify-content: space-between; }
      .kpi { display:flex; gap:8px; align-items:center; }
      .kpi b { font-size: 14px; }
      @media print {
        @page { size: A4; margin: 10mm; }
        body { margin:0; }
        .page { max-width: none; padding:0; }
        a { color: inherit; text-decoration: none; }
        header { margin-bottom: 6px; }
      }
    </style>
  </head>
  <body>
    <div class="page">
      <header>
        <div>
          <h1>S.I.M.A — Sistema de Información de Mencionados y Aprehendidos</h1>
          <div class="subtitle">Resumen ejecutivo · Fecha: <span id="today"></span></div>
        </div>
        <div>
          <span class="pill">Node/Express</span>
          <span class="pill">PostgreSQL</span>
          <span class="pill">React + MUI</span>
          <span class="pill">JWT</span>
        </div>
      </header>

      <div class="grid">
        <section class="card">
          <h2>Objetivo</h2>
          <p>Plataforma para registrar, consultar y auditar personas mencionadas/aprehendidas y sus registros delictuales. Optimizada para uso operativo, con seguridad, exportaciones y respaldos.</p>

          <h2>Arquitectura</h2>
          <ul>
            <li>API REST (Node.js + Express) con PostgreSQL y migraciones (Knex).</li>
            <li>Frontend React con rutas protegidas y MUI; Axios con refresh de tokens.</li>
            <li>Autenticación JWT (access + refresh) con rotación y revocación (<code>token_version</code>).</li>
            <li>Auditoría: campos <code>created_by</code>, <code>updated_by</code>, <code>deleted_at</code> y tabla <code>audit_logs</code>.</li>
            <li>Seguridad: CORS, Helmet, HPP, rate‑limit en login, validación/ sanitización.</li>
          </ul>

          <h2>Principales capacidades</h2>
          <ul>
            <li>Búsqueda de personas por nombre/DNI/comisaría; exportación CSV/XLSX.</li>
            <li>Detalle con fotos; carga/edición; soft delete.</li>
            <li>Registros delictuales con filtros y paginación server‑side; duplicado; exportación CSV/XLSX.</li>
            <li>Swagger UI: documentación viva en <code>/api/docs</code>.</li>
            <li>Backups: script que genera dump de DB y empaqueta <code>uploads/</code>.</li>
          </ul>

          <h2>Operación</h2>
          <ul>
            <li>Login inicial: <b>admin / admin123</b> (cambiar en primer uso).</li>
            <li>Dev: Backend <code>http://localhost:4000</code> · Frontend <code>http://localhost:3000</code>.</li>
            <li>Exportaciones a CSV/XLSX disponibles en búsqueda de personas y registros.</li>
          </ul>
        </section>

        <aside class="card">
          <h2>Seguridad</h2>
          <ul>
            <li>JWT con rotación de refresh y revocación por <code>token_version</code>.</li>
            <li>Validaciones Joi; sanitización; validación MIME de uploads.</li>
            <li>Rate‑limit en login; CORS + Helmet + HPP; IP allow en prod.</li>
            <li>Soft delete y logs de auditoría para cambios sensibles.</li>
          </ul>

          <h2>Endpoints</h2>
          <ul>
            <li><code>GET /api/personas</code> filtros <code>q|dni|comisaria</code>, paginación y export.</li>
            <li><code>GET /api/registros</code> filtros <code>persona_id|q</code>, paginación y export.</li>
            <li>Swagger: <code>/api/docs</code> · Health: <code>/api/health</code>.</li>
          </ul>

          <div class="kpi"><b>Listo para producción</b><span class="muted">(con PM2 + Nginx y backups programados)</span></div>
        </aside>
      </div>

      <section class="card shots">
        <figure>
          <img src="../assets/dashboard.png" alt="Dashboard" />
          <figcaption>Dashboard</figcaption>
        </figure>
        <figure>
          <img src="../assets/buscar.png" alt="Búsqueda y exportación" />
          <figcaption>Búsqueda de personas y exportación</figcaption>
        </figure>
        <figure>
          <img src="../assets/registros.png" alt="Registros con paginación" />
          <figcaption>Registros con filtros y paginación</figcaption>
        </figure>
        <figure>
          <img src="../assets/swagger.png" alt="Swagger UI" />
          <figcaption>Documentación Swagger</figcaption>
        </figure>
      </section>

      <footer>
        <div>Repositorio: S.I.M.A · Swagger en <code>/api/docs</code></div>
        <div>Contacto: responsable del proyecto</div>
      </footer>
    </div>

    <script>
      document.getElementById('today').textContent = new Date().toLocaleDateString('es-AR');
    </script>
  </body>
  </html>
